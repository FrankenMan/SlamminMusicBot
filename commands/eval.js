// Generated by newcommand.js
exports.aliases = ["e"];

exports.execute = function(bot, msg, suffix){  
  return new Promise((resolve, reject) => {
    if(msg.author.id !== "114758367905447939") return;
    var re = /^lang:(.*?)\s/i;
    var match = suffix.match(re);
    var code = suffix;
    var lang = "";

    if(match) {
        lang = match[1];
        code = code.substring(lang.length + 5).trim();
    }

    try{
      var start = Date.now();
      var result = eval(code);
      var taken = Date.now() - start;
      msg.channel.sendMessage(
`\`INPUT\`
${bot.Utils.codeblock("js", code)}
\`OUTPUT\`
${bot.Utils.codeblock(lang, result ? result : "undefined")}
Took: ${taken} ms`)
      .then(resolve).catch(reject);

    }catch(e){
      msg.channel.sendMessage(bot.Utils.codeblock("js", e.message)).then(reject).catch(reject);
    }
  });
}